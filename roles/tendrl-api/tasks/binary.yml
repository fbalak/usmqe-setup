- name: Install tendrl-api dependencies
  yum:
    name={{ item }}
    state=present
    validate_certs=no
  with_items:
    - epel-release
    - systemd-units

- name: Install tendrl-api without allowed epel
  yum:
    name=tendrl-api
    state=latest
  when:
    not use_epel
    
- name: Install tendrl-api with allowed epel
  yum:
    name=tendrl-api
    state=latest
    enablerepo=epel
  when:
    use_epel

- name: Install tendrl-api-httpd without allowed epel
  yum:
    name=tendrl-api-httpd
    state=latest
  when:
    not use_epel
    
- name: Install tendrl-api-httpd with allowed epel
  yum:
    name=tendrl-api-httpd
    state=latest
    enablerepo=epel
  when:
    use_epel

- name: Install tendrl-api-doc without allowed epel
  yum:
    name=tendrl-api-doc
    state=latest
  when:
    not use_epel
    
- name: Install tendrl-api-doc with allowed epel
  yum:
    name=tendrl-api-doc
    state=latest
    enablerepo=epel
  when:
    use_epel
